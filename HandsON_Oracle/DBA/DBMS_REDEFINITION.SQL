BEGIN
DBMS_REDEFINITION.CAN_REDEF_TABLE('DBRP1001','CLIENTE2',
        dbms_redefinition.cons_use_pk);
END;
/

--

CREATE TABLE DBRP1001.INT_CLIENTE
(CODORG                         NUMBER(4)              NOT NULL,
CODCLI                          NUMBER(7)              NOT NULL,
CODCLIX                         VARCHAR2(20)           NOT NULL ,
NOMCLI                          VARCHAR2(100)          NOT NULL ,
EMAIL                           VARCHAR2(80)                    ,
CDSITUACAO_PARTICIPACAO         VARCHAR2(11)           NOT NULL ,
CDTIPO_PESSOA                   VARCHAR2(11)           NOT NULL ,
CDSTATUS_PARTICIPACAO           VARCHAR2(11)           NOT NULL ,
ENVCOR                          VARCHAR2(1)            NOT NULL ,
CDOPERADOR_INCLUSAO             VARCHAR2(15)           NOT NULL ,
DTINCLUSAO                      DATE                   NOT NULL ,
CDOPERADOR_ALTERACAO            VARCHAR2(15)           NOT NULL ,
DTALTERACAO                     DATE                   NOT NULL );
--
ALTER TABLE DBRP1001.INT_CLIENTE ADD (PRIMARY KEY (CODORG, CODCLI));
--

BEGIN
DBMS_REDEFINITION.START_REDEF_TABLE('DBRP1001', 'CLIENTE2','INT_CLIENTE',
       'CODORG CODORG, CODCLI CODCLI, CODCLIX CODCLIX, NOMCLI NOMCLI, EMAIL EMAIL, CDSITUACAO_PARTICIPACAO CDSITUACAO_PARTICIPACAO, CDTIPO_PESSOA CDTIPO_PESSOA, CDSTATUS_PARTICIPACAO CDSTATUS_PARTICIPACAO, ENVCOR ENVCOR, CDOPERADOR_INCLUSAO CDOPERADOR_INCLUSAO,DTINCLUSAO DTINCLUSAO, CDOPERADOR_ALTERACAO CDOPERADOR_ALTERACAO, DTALTERACAO DTALTERACAO',
        dbms_redefinition.cons_use_pk);
END;

--

--BEGIN 
--DBMS_REDEFINITION.SYNC_INTERIM_TABLE('DBRP1001', 'CLIENTE2', 'INT_CLIENTE');
--END;
--/
--

BEGIN
DBMS_REDEFINITION.FINISH_REDEF_TABLE('DBRP1001', 'CLIENTE2', 'INT_CLIENTE');
END;
/
